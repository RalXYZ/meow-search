# 开发日志

## 9月10日  

**今天至少要把数据正确地写入数据库中**  
`4:00 PM` 打算开始写，然而在懒  
`4:24 PM` 开工，开始删除旧应用和旧数据库  
`4:28 PM` 开始初始化search app  
`4:55 PM` 初始化完成，已完成migrate  
`5:15 PM` 将json写入python字典 测试成功  
`5:29 PM` 找到了处理字符串中raw转义运算符的方法  
`5:30 PM` 收工，吃饭  

`6:49 PM` 开工  
`7:24 PM` json数据成功写入数据库，但返回值不人类可读  
`7:33 PM` 解决人类可读性问题  
`7:38 PM` 测试 `Result.objects.filter(title__contains='内马尔')` 成功  
`7:51 PM` 文章URL配置成功  
`8:24 PM` 前端article已可正常显示  
`8:34 PM` 若查找失败，返回404页面  
`8:43 PM` 调试过程中发现转义字符问题  
`9:00 PM` 字面替换所有换行转义字符为`<br>`，但浏览器字面地显示了`<br>`  
`9:10 PM` 感谢Axton的帮助，转义字符问题解决，最终发现需添加 safe 过滤器  
`9:15 PM` 休息  

`11:07 PM` 开工，开始查询匹配`?keyword=`的问题  
`11:18 PM` 找到了path转换器  
`11:47 PM` 实现url搜索的绝大部分功能，暂时放弃`?keyword=`匹配  
`11:59 PM` 暂停后端开发，转向前端  
`12:30 AM` 解决首页前端相关的若干问题  
`12:39 AM` 收工，睡觉  
`12:50 AM` 然而并没睡，正好和朋友聊起来匹配问题  
`1:11 AM` 解决匹配问题；大概我脑子的状态，今天不适合继续开发下去了  

下一阶段的方向：  
1. ~~关键字查询的相关设置，支持同时查询标题和正文中的内容~~ 已于12日基本解决  
2. ~~匹配`?keyword=`~~ 已于10日解决  
3. ~~解决前端和后端交互的问题~~ 已于11日、12日部分解决  
4. 设计搜索结果页面和新闻文本页面  



## 9月11日  

**今天的主要任务是配置好一个有正常功能的主页**  
`6:57 PM` 开工  
`6:59 PM` url 匹配逻辑混乱，但暂时懒得重构了；接下来写的东西尽可能不要这么垃圾  
`7:06 PM` 首页的静态文件部署了，然而CSS有问题  
`7:33 PM` 我认为我找到原因了：django的静态文件需要做特殊处理 `"{% static "homepage/css/styles.css" %}"`  
`7:43 PM` 一个个进行手动替换，问题解决，可显示首页  
`7:52 PM` 把代码托管到GitHub；出去遛弯儿  

`8:37 PM` 开工，主要解决搜索框问题  
`9:01 PM` 搜索问题被成功解决，实现了一个基本业务逻辑完整的搜索引擎；我先激动一会儿  

`9:16 PM` 激动完了；现在在 Bootstrap Studio 里把刚刚在 PyCharm 的修改同步上  
`9:25 PM` 同步完成，咸了  

`1:00 AM` 查了查 bootstrap 主题相关的问题  
`1:18 AM` 让搜索框变成一个真正意义上的搜索框  
`1:19 AM` 收工  



## 9月12日

**今天的主要任务是交流学习，以及解决关键字查询和查询结果页的若干问题**  
`9:11 AM` 和朋友讨论关于前后端代码分离的一些问题  
`9:42 AM` 讨论完毕，结论是我目前使用的工具不能使它们完全分离  

`9:57 AM` 继续开发 试图解决 合并 标题带关键字的所有文章 和 内容带关键字的所有文章  
`10:12 AM` 问题解决，使用了Python的集合  

`10:30 AM` 继续开发，试图解决搜索页正文显示的问题  
`10:45 AM` 解决该问题。  
`10:54 AM` 解决search url不合法导致404的问题；我让这个分支fallback到主页  
`12:06 PM` 和朋友交流、讨论一些实现，直到现在  
`12:07 PM` 收到了美工发来的设计草图，可以开始前端开发了；吃饭，收工  

`5:27 PM` 根据设计草图开始设计前端  
`6:43 PM` 首页基本按照草图改好了；搜索页已经有排版了  
`7:25 PM` 整完了搜索结果页除了顶栏之外的所有内容；吃金拱门去了  

`9:33 PM` 开工，开始整内容页  
`10:10 PM` 基本解决内容页问题  
`10:26 PM` 查了一波怎么在Nginx上部署，暂时没有收获  
`10:30 PM` 开了个A记录  
`10:48 PM` 域名解析还没到，资料查的差不多了；先收工  



## 9月13日  

**今天的主要任务是优化搜索结果，以及解决部署相关的问题**  
`9:09 AM` `lnmp vhost add` ，配了SSL
`9:11 AM` 开始检索部署相关知识  
`9:23 AM` 开始优化搜索结果页中，正文的缩略显示  
`10:27 AM` 优化完毕；好久不写代码了，感觉效率下降了很多  
`10:29 AM` 开始着手关键词高亮显示的问题  
`10:54 AM` 思考jQuery的必要性  
`11:07 AM` 和朋友讨论了jQuery  
`11:27 AM` 高亮显示出来了，但只有一个  
`11:40 AM` 完全解决了高亮显示的问题  

`1:09 PM` 开始配服务端  
`1:15 PM` `virtualenv meow_search_env`  
`1:55 PM` 没有想到，直到现在还被卡死在 sqlite3 安装上  
`2:25 PM` 换个思路，尝试使用conda  
`2:32 PM` 装好了miniconda，然而无法执行conda指令  
`2:35 PM` 哦，是因为我没更新环境变量 `source ~/.bashrc`  
`2:37 PM` 好，在base环境里可以 import sqlite3  
`2:39 PM` `conda create -n django python=3.8`  
`2:45 PM` 总算可以 `python manage.py runserver`了，然而数据库的migration可能有问题  
`2:50 PM` `47.240.9.220:8000` 测试成功  
`3:02 PM` 给朋友们开了几分钟服务器供围观（现在关了  
`3:04 PM` 不皮了不皮了，干正事儿，`pip install uwsgi`  
`3:21 PM` uwsgi 测试成功，我被中文标点坑死了...  
`4:16 PM` 配好了大部分东西，但网站还无法正常访问  
`4:38 PM` 443端口部署完成  
`4:42 PM` 301跳转也配好了，收工  

`9:40 PM` 开工  
`9:54 PM` 解决了空字符串搜索的问题  

`10:55 PM` 开始解决本地和服务器的文件同步问题  
`11:10 PM` 使用了 PyCharm 自带的 deploy 功能  
`11:19 PM` 发现 `conda` 的环境变量不能在连接ssh时自动加载；这似乎和ssh的设计理念有关  
`11:34 PM` 服务端项目文件夹 `rm -rf .git`  
`11:49 PM` 修改了 `~/.zshrc`，解决了conda的问题  

*已解决部署问题，这份开发日志未来可能不会更新*  